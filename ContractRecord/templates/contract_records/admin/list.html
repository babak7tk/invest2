{% extends 'Layouts/admin-master.html' %}
{% load static public_tags %}

{% block title %} Ù„ÛŒØ³Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ø§ {% endblock %}

{% block content %}

<div class="row">

    {% if messages %}
    {% for item in messages %}
    <script>
        Swal.fire({
            title: "ØªØ¨Ø±ÛŒÚ© ! ğŸ¥³",
            icon: 'success',
            text: '{{ item }}',
            type: "success",
            cancelButtonColor: 'var(--primary)',
            confirmButtonText: 'Ø§ÙˆÚ©ÛŒ',
        })
    </script>
    {% endfor %}
    {% endif %}

    <div class="col-lg-12">
        <div class="card-box">
            <div class="card-block">
                <h4 class="card-title">
                    {% if request.resolver_match.url_name == 'contract-request-all-list' %}Ù‡Ù…Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§
                    {% elif request.resolver_match.url_name == 'contract-request-pending-list' %}Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø­Ø§Ù„
                    Ø¨Ø±Ø±Ø³ÛŒ
                    {% elif request.resolver_match.url_name == 'contract-request-correction-list' %}Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø±
                    Ø§Ù†ØªØ¸Ø§Ø± ØªÚ©Ù…ÛŒÙ„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ùˆ Ø±ÙØ¹ Ù†Ù‚Øµ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±
                    {% elif request.resolver_match.url_name == 'contract-request-approved-list' %}Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡
                    Ùˆ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØµØ¯ÙˆØ± Ú©Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ Ø¨ÙˆØ±Ø³ Ú©Ø§Ù„Ø§
                    {% elif request.resolver_match.url_name == 'contract-request-issued-list' %}Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ ØµØ§Ø¯Ø± Ø´Ø¯Ù‡
                    {% elif request.resolver_match.url_name == 'contract-request-rejected-list' %}Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø±Ø¯ Ø´Ø¯Ù‡
                    {% endif %}
                </h4>

                <hr>

                <span id="list">
                    {% if object_list %}
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Ø±Ø¯ÛŒÙ</th>
                                <th>Ú©Ø¯ Ù…Ù„ÛŒ / Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ</th>
                                <th>Ù†ÙˆØ¹ Ø´Ø®Øµ</th>
                                <th>ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª</th>
                                <th>Ù…Ø´Ø§Ù‡Ø¯Ù‡</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% for item in object_list %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ item.national_id | default:'---' }}</td>
                                <td><span
                                        class="badge bg-{% if item.user_type == 'genuine' %}danger{% else %}success{% endif %}">{% if item.user_type == 'genuine' %}Ø­Ù‚ÛŒÙ‚ÛŒ{% else %}Ø­Ù‚ÙˆÙ‚ÛŒ{% endif %}</span>
                                </td>
                                <td>{{ item.created_at | jdate | default:'---' }}</td>
                                <td>
                                    <div class="buttons ">
                                        <form
                                            action="{% url 'contract-request-delete' item.id %}?next={{ request.path }}"
                                            id="delete_form_{{ item.id }}" method="post">
                                            {% csrf_token %}

                                            <a href="{% url 'contract-request' item.id %}"
                                                class="btn btn-warning btn-action mr-1" data-toggle="tooltip" title=""
                                                data-original-title="Ù…Ø´Ø§Ù‡Ø¯Ù‡"><i class="fas fa-eye-alt"></i><i
                                                    class="fa fa-eye"> </i> </a>
                                            {% comment %}
                                            <button type="button" data-original-title="Ø­Ø°Ù" data-toggle="tooltip"
                                                onclick="DeleteConfirm('{{ item.id }}')"
                                                class="delete_button btn btn-danger btn-action"><i class="fa fa-trash">
                                                </i>
                                            </button> {% endcomment %}
                                        </form>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                    <h4 style="text-align: center; padding: 40px">Ù…ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</h4>
                    {% endif %}
                    {% include 'Admin/pagination.html' with page_obj=page_obj %}
                </span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block Scripts %}
<script>
    function DeleteConfirm(id) {
        Swal.fire({
            title: "Ù‡Ø´Ø¯Ø§Ø± ! ",
            icon: 'warning',
            text: "Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø¢ÛŒØªÙ… Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: '#00aced',
            cancelButtonColor: '#e6294b',
            confirmButtonText: 'Ø­Ø°Ù',
            cancelButtonText: 'Ø§Ù†ØµØ±Ø§Ù'
        }).then((result) => {
            if (result.isConfirmed) {
                $('#delete_form_' + id).submit();
            }
        })
    }
</script>
{% endblock %}